@model TaskManagementMvc.Models.ApplicationRole

@{
    var permissions = ViewData["Permissions"] as List<TaskManagementMvc.Models.RolePermission> ?? new();
    var users = ViewData["Users"] as List<TaskManagementMvc.Models.UserRole> ?? new();
}

<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="mb-0">جزئیات نقش: @Model.Name</h2>
        <corp-btn asp-action="Index" variant="outline" icon="bi-arrow-right" dense>بازگشت</corp-btn>
    </div>
    <dl class="row">
        <dt class="col-sm-2">توضیحات</dt>
        <dd class="col-sm-10">@Model.Description</dd>
        <dt class="col-sm-2">وضعیت</dt>
        <dd class="col-sm-10">
            @if (Model.IsActive)
            {
                <corp-badge variant="success" dense pill icon="bi-check2">فعال</corp-badge>
            }
            else
            {
                <corp-badge variant="secondary" dense pill icon="bi-x">غیرفعال</corp-badge>
            }
        </dd>
    </dl>

    <h4 class="mt-3">کاربران</h4>
    <ul class="list-unstyled row g-2">
        @foreach (var ur in users)
        {
            <li class="col-md-4"><i class="bi bi-person"></i> @ur.User?.FullName <small class="text-muted">(@ur.User?.UserName)</small></li>
        }
        @if (!users.Any())
        {
            <li><span class="text-muted">کاربری یافت نشد.</span></li>
        }
    </ul>

    <h4 class="mt-3">دسترسی‌ها</h4>
    <ul class="list-unstyled row g-2">
        @foreach (var rp in permissions)
        {
            <li class="col-md-4"><corp-badge variant="info" dense>@rp.Permission?.Name <small class="text-muted">(@rp.Permission?.Code)</small></corp-badge></li>
        }
        @if (!permissions.Any())
        {
            <li><span class="text-muted">دسترسی ثبت نشده.</span></li>
        }
    </ul>
</div>


